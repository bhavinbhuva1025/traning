<!DOCTYPE html>
<html lang="en">
<title> SignUp page</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="registration.css">

</head>
<body>
	<div class="main-register">
		<h1>Registration</h1>
		<div class="main-registerinfo">
			<div class="register-top">
					<form class="form-group">
					<input class="name" type="text" name="Username" placeholder="Name">
                        <p class="err" id="err-name">User Name is Required</p>

					<input class="email" type="email" name="email" placeholder="Email" >
                       <p class="err" id="err-email">User E-mail is Required</p>

					<input class="pass" type="password" name="password" placeholder="Password">
                        <p class="err" id="err-pass">User Password is Required</p>

					<input class="re-pass" type="digit" name="password" placeholder="Confirm Password">
                        <p class="err"  id="err-repass">User Confrim Password is Required</p>

					<input type="submit" onclick="register()" id="btn" value="Submit">
				</form>
				<p> <a href="../login/login.html"> Sign in?</a></p>
			</div>
		</div>
	</div>
	 <div class="loaderPerent" id="loaderPerentDiv">
    <div id="loader"></div>
  </div>

	<script src="registration.js"></script>
</body>
</html>


function register(event) {
    event.preventDefault(); // stop form submit

    let uname = document.querySelector(".name").value.trim();
    let email = document.querySelector(".email").value.trim();
    let pass = document.querySelector(".pass").value.trim();
    let repass = document.querySelector(".re-pass").value.trim();

    let errname = document.querySelector("#err-name");
    let erremail = document.querySelector("#err-email");
    let errpass = document.querySelector("#err-pass");
    let errrepass = document.querySelector("#err-repass");

    let valid = true;

    // Name Validation
    if (uname === "") {
        errname.style.display = "block";
        valid = false;
    } else {
        errname.style.display = "none";
    }

    // Email Validation
    let emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    if (email === "") {
        erremail.innerHTML = "Email is required";
        erremail.style.display = "block";
        valid = false;
    }
    else if (!emailPattern.test(email)) {
        erremail.innerHTML = "Invalid Email Format";
        erremail.style.display = "block";
        valid = false;
    }
    else {
        erremail.style.display = "none";
    }

    // Password Validation
    if (pass === "") {
        errpass.style.display = "block";
        valid = false;
    } else {
        errpass.style.display = "none";
    }

    // Confirm Password Validation
    if (repass === "") {
        errrepass.innerHTML = "Confirm Password is required";
        errrepass.style.display = "block";
        valid = false;
    }
    else if (pass !== repass) {
        errrepass.innerHTML = "Passwords do not match!";
        errrepass.style.display = "block";
        valid = false;
    }
    else {
        errrepass.style.display = "none";
    }

    // Stop if validation failed
    if (!valid) return;

    // Get existing users
    let users = JSON.parse(localStorage.getItem("userDetail")) || [];

    // Check if email already exists
    if (users.some(user => user.email === email)) {
        erremail.innerHTML = "Email already exists!";
        erremail.style.display = "block";
        return;
    }

    // Save user
    let newUser = {
        id: Date.now(),
        name: uname,
        email: email,
        password: pass,
        role: "user",
        timestamp: Date.now()
    };

    users.push(newUser);
    localStorage.setItem("userDetail", JSON.stringify(users));

    alert("Registration Successful!");
    document.querySelector("form").reset();
}



* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
}

body {
    background: linear-gradient(135deg, #f3f3f3, #e2e2e4);
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
}

h1 {
    text-align: center;
    margin-bottom: 20px;
}

.main-register {
    width: 420px;
    margin: auto;
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 0 25px rgba(57, 56, 56, 0.3);
}

.register-top input[type="text"],
.register-top input[type="email"],
.register-top input[type="password"],
.register-top input[type="digit"] {
    width: 100%;
    padding: 12px;
    border: none;
    margin: 10px 0;
    border-radius: 6px;
    font-size: 15px;
    background: rgba(255, 255, 255, 0.9);
}

.register-top input[type="submit"] {
    width: 100%;
    padding: 12px;
    margin-top: 15px;
    background: #141ca4;
    color: #fff;
    font-size: 16px;
    border: none;
    border-radius: 6px;
    font-size: 18px;
    cursor: pointer;
}
.register-top p {
    margin-top: 15px;
    font-size: 15px;
}

.register-top p a {
    color: #100606;
    text-decoration: underline;
}



.err{
    color: red;
}
#err-name{
    display: none;
}
#err-email{
    display: none;
}
#err-pass{
    display: none;
}
#err-repass{
    display: none;
}
#err-check{
    display: none;
}
@media (max-width: 480px) {
    .main-registerinfo {
        width: 90%;
        padding: 30px;
    }
}


function login() {
    let email = document.querySelector(".email").value;
    let pass = document.querySelector(".pass").value;

    let users = JSON.parse(localStorage.getItem("userDetail")) || [];

    let user = users.find(u => u.email === email && u.password === pass);

    if (!user) {
        alert("Invalid credentials!");
        return;
    }

    // Save login time
    user.lastLogin = Date.now();

    // Save active user
    localStorage.setItem("activeUser", JSON.stringify(user));

    // Update userDetail
    localStorage.setItem("userDetail", JSON.stringify(users));

    alert("Login Successful!");
}

